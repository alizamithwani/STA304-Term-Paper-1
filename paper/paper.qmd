---
title: "Incidents Leading to Time-Consuming TTC Bus Delays in 2024"
subtitle: "The time period covered is January 2024 to August 2024"
author: 
  - Aliza Abbas Mithwani
thanks: "Code and data are available at: https://github.com/alizamithwani/TTC-Delays-Analysis.git"
date: September 24, 2024
date-format: long
abstract: "This paper discusses the causes for TTC bus delays in 2024 from January until August. We find that although mechanical incidents cause the most frequent delays, diversions cause the most time-consuming delays. People seem to be frustrated by the TTC delays and this is reducing their consumer satisfaction. Uncovering the leading causes for these delays can allow the Toronto Transit Commission (TTC) to target their investigation and solutions."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
```



# Introduction

In 2019, the Global News reported that although the majority of TTC riders said they are satisfied with the company's service, half have complained of regular delays when using the service. This problem has led a reduction in satisfaction for these people. Riders at rush hour reported being more affected by unanticipated TTC delays. This data was collected by a poll conducted in May 2019, which sampled almost 2,000 riders in Toronto, Calgary, Edmonton, Vancouver and Montreal. (@poll)

The goal of this research paper is to discover which incidents are causing the most time-consuming TTC bus delays. The data set used in this paper is "TTC Streetcar Delay Data" and specifically for 2024 (the file name is "ttc-streetcar_delay_data-2024.xlsx". This data set was taken from City of Toronto's Open Data Portal and published by the Toronto Transit Commission (TTC). For the sake of simplicity, this paper only focuses on TTC buses as opposed and does not include or draw conclusions about TTC subways and streetcars. Type of incident is not featured in the TTC Subway Delay Data and TTC Streetcar Delay Data included a couple of additional incident types.

The rest of this paper is structured such that we will discuss the data (@sec-data) next. More specifically, we will go over where this data comes from (the source), a more comprehensive context for this data, and a description/summary of the data itself.

# Data {#sec-data}

As mentioned earlier, the data set was found on City of Toronto's Open Data Portal and titled "TTC Bus Delay Data". When simulating the data we used tidyverse (@tidyverse), when downloading the data, we used opendatatoronto and tidy verse (@opendatatoronto and @tidyverse), and when cleaning and testing the data we used tidyverse (@tidyverse). Furthermore, we used the statistical programming language R (@citeR) to write any code associated with this paper. The data set obtained contained 11 data sets, each corresponding to one of the last 11 years. Each data set has 10 variables: Report Date, Route, Time, Day, Location, Incident, Min Delay, Min Gap, Direction and Vehicle. One specific variable of interest is Incident, which provides a description of the incident that caused the delay. The second variable of interest is Min Delay, which is the delay to the schedule for the next bus (in minutes).

Only the 2024 data set (January-August) was used to analyze the most up-to-date situation of the TTC bus delays. There might be other contributing factors in older years, which would result in reduced applicability of conclusions to the current situation if those contributing factors have changed. The data set was published by the Toronto Transit Commission (TTC), which is the company that provides the bus service in discussion. The Global News reported that half of the riders they sampled said they were dissatisfied by the TTC delays (@poll), sparking an interest in why these delays occur and is there a certain incident that is more responsible for these delays compared to rest the rest. Finding an answer to this question can lead to more focused investigation into the problem and more tailored solutions. 

```{r}
#| label: fig-ttc-table
#| fig-cap: Total number of incidents in each category
#| echo: false
#| message: false
#| warning: false


# Load the knitr package
library(knitr)

# Read data
analysis_data <- read_csv("../data/analysis_data/TTC_analysis_data.csv")

# Count the number of TTC incidents
incident_count <- analysis_data |>
  count(incident)

# Display the table
kable(incident_count, align = "c", col.names = c("Incident Type", "Number of Incidents"))
```

Analyzing how frequently each incident has occurred over the last year (@fig-ttc-table), we were able to see which incidents occurred more than others. Although this table tells us a lot about which incidents the TTC buses are facing the most, the feelings of dissatisfaction from TTC delays likely have more to do with the amount of time wasted or the lateness of the rider in reaching their destination. Therefore, although it is useful to know that mechanical incidents were the most common cause for TTC bus delays and that the TTC can target working to improve in that department, it does not reveal the most time-consuming cause of TTC bus delays. 

To investigate which incidents are causing the most time-costing bus delays, we find the total delay time due to each type of incident as displayed in @fig-ttc-graph. Here we used the variable Incident for the x-axis and the variable Min Delay for the y-axis, however we converted minutes to hours by dividing by 60. This makes it easier to fit the data in the graph as the sum of total delay time in minutes for each incident was too large. As we can clearly see, this visual tells as different story from @fig-ttc-table. In @fig-ttc-graph we can see that diversions are, in fact, the most time-consuming incident and have resulted in the most delay time overall in 2024 so far. Interestingly, the Transit app has had an update recently that allows riders access to live updates regarding TTC detours and diversions (@transitapp). Since this update took place in September and this data set only contains data from January till August, it will be interesting to see if this Transit app update will result in a better experience for riders as they will be able to become aware of diversions more efficiently and can avoid using the TTC bus service if they are in a hurry.

```{r}
#| label: fig-ttc-graph
#| fig-cap: Total Delay Time for TTC Buses by Incident Type (2024 Year−to−Date)
#| echo: false
#| fig-width: 22
#| fig-height: 6

library(tidyverse)
library(ggplot2)

# Create the graph
graph <- analysis_data |>
  ggplot(aes(x = incident, y = min_delay/60, fill = incident)) +
  geom_col() +
  theme_minimal() + 
  labs(x = "Type of Incident Causing the TTC Bus Delay", y = "Total Delay Time due to Incident (in hours)") +
  theme(
    axis.text.x = element_text(size = 7.5))

print(graph)
```

# Model

## Model set-up


### Model justification


# Results




# Discussion

## First discussion point {#sec-first-point}

## Second discussion point

## Third discussion point

## Weaknesses and next steps

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check


## Diagnostics

\newpage


# References
@citeR

@tidyverse

@opendatatoronto

@ggplot2

@knitr

@poll

@transitapp